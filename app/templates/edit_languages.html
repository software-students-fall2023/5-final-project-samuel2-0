{% extends 'base.html' %}

{% block container %}
  <form method="post" action="{{ url_for('edit_languages', user_id=user._id) }}" id="languages-form">

    <div id="languages-container">
      <h2 class="edit-languages-h2">Edit Languages</h2>
      {% for language in user.languages %}
        <div class="language-box">
          <input type="text" name="languages[]" class="form-control" required value="{{ language }}">
          <span class="remove-language" onclick="removeLanguage(this)">X</span>
        </div>
      {% endfor %}
    </div>

    <button type="button" class="btn btn-primary" onclick="addLanguage()">Add Language</button>
    <button type="submit" class="btn btn-primary">Save Changes</button>
  </form>

  <script>
    function addLanguage() {
      var container = document.getElementById('languages-container');
      var newBox = document.createElement('div');
      newBox.className = 'language-box';
      newBox.innerHTML = '<input type="text" name="languages[]" class="form-control" required>' +
                         '<span class="remove-language" onclick="removeLanguage(this)">X</span>';
      container.appendChild(newBox);
    }

    function removeLanguage(element) {
      var container = document.getElementById('languages-container');
      var box = element.parentElement;
      container.removeChild(box);
    }
  </script>
{% endblock %}
